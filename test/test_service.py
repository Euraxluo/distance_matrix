# -*- coding: utf-8 -*- 
# Time: 2022-03-01 11:23
# Copyright (c) 2022
# author: Euraxluo


from .conftest import register
from unittest import TestCase

from amap_distance_matrix.services.service import *
from amap_distance_matrix.services.geo import *


class TestHelper(TestCase):

	def test_distance_matrix(self):
		cases = {
			"1": geo_addr_city([("大兴", "北京")]),
			"2": [(116.3819, 39.8745), (116.3819, 39.8745)],
			"3": [(116.3819, 39.8745), (116.382, 39.8744), (116.3819, 39.8745)],
			"4": geo_addr_city([("四川科技馆", "成都"), ("天府广场", "成都"), ("太古里", "成都"), ("成都IFS", "成都")]),
			"5": [(116.4478, 39.9292),
				  (116.4455, 39.922),
				  (116.4439, 39.9156),
				  (116.4455, 39.922),
				  (116.4478, 39.9292),
				  (116.4439, 39.9156),
				  (116.4478, 39.9292)],
			"6": [(116.4459, 39.8696), (116.4015, 39.8999), (116.4023, 39.9002), (116.4041, 39.9002),
				  (116.4051, 39.9003), (116.4059, 39.9003), (116.4066, 39.8962), (116.4066, 39.8963),
				  (116.4066, 39.896), (116.4067, 39.8968),
				  (116.4068, 39.8933), (116.4068, 39.8963), (116.4068, 39.8965), (116.4068, 39.8966),
				  (116.4077, 39.9003), (116.4092, 39.9005), (116.4128, 39.9004), (116.4158, 39.9006),
				  (116.4287, 39.9004), (116.4309, 39.9003),
				  (116.4641, 39.8659), (116.4459, 39.8696), (116.4459, 39.8696), (116.4459, 39.8696)]

		}
		for k, v in cases.items():
			print(f"====================={k}========================")
			print(v)
			a, b, c = distance_matrix(*v, time_slot='30', strictly_constrained=False, geo_wide=200)
			for i, vs in a.items():
				for j, v in vs.items():
					print(i, j, v)
			for i, vs in b.items():
				for j, v in vs.items():
					print(i, j, v)
			print("=========================================")
			for i, vs in c.items():
				for j, v in vs.items():
					print(i, j, v)

	def test_route_waypoints(self):
		cases = {
			'1': geo_addr_city([("天府五街", "成都"), ("太古里", "成都"), ("天府三街", "成都")]),
			'2': [(106.4951, 29.5405),
				  (106.4969, 29.5452),
				  (106.4982, 29.542),
				  (106.4952, 29.517),
				  (106.4943, 29.5327),
				  (106.5003, 29.5142),
				  (106.4997, 29.5373),
				  (106.4928, 29.5336),
				  (106.4997, 29.5373),
				  (106.4939, 29.533),
				  (106.4926, 29.5389),
				  (106.4997, 29.5373),
				  (106.4926, 29.5389),
				  (106.4991, 29.5262),
				  (106.4982, 29.542),
				  (106.4955, 29.5299),
				  (106.4982, 29.542),
				  (106.4963, 29.5121),
				  (106.4991, 29.5262),
				  (106.4991, 29.5112),
				  (106.4967, 29.5104),
				  (106.4978, 29.5361),
				  (106.4967, 29.5104),
				  (106.5002, 29.5096),
				  (106.4939, 29.533),
				  (106.4955, 29.5299),
				  (106.4928, 29.5336),
				  (106.5005, 29.5188),
				  (106.4997, 29.5373),
				  (106.4952, 29.517),
				  (106.4939, 29.533),
				  (106.4982, 29.542),
				  (106.5005, 29.5188),
				  (106.4948, 29.5336),
				  (106.5209, 29.509),
				  (106.5005, 29.5268),
				  (106.5003, 29.5142),
				  (106.5005, 29.5268),
				  (106.4963, 29.5121),
				  (106.4982, 29.542),
				  (106.4939, 29.533),
				  (106.5003, 29.5142),
				  (106.4928, 29.5336),
				  (106.5005, 29.5268),
				  (106.4943, 29.5327),
				  (106.4955, 29.5299),
				  (106.4914, 29.5284),
				  (106.5005, 29.5268),
				  (106.5209, 29.509),
				  (106.4997, 29.5373),
				  (106.4967, 29.5249),
				  (106.4983, 29.5132),
				  (106.4948, 29.5336),
				  (106.4951, 29.5405),
				  (106.496, 29.5322),
				  (106.4983, 29.5132),
				  (106.5005, 29.5268),
				  (106.4948, 29.5336),
				  (106.4969, 29.5452),
				  (106.4978, 29.5361),
				  (106.4969, 29.5452),
				  (106.4983, 29.5132),
				  (106.4943, 29.5327),
				  (106.5002, 29.5096),
				  (106.5209, 29.509),
				  (106.496, 29.5322),
				  (106.4983, 29.5142),
				  (106.4926, 29.5389),
				  (106.4967, 29.5104),
				  (106.4983, 29.5132),
				  (106.4952, 29.517),
				  (106.5002, 29.5096),
				  (106.4967, 29.511),
				  (106.4967, 29.5249),
				  (106.4939, 29.533),
				  (106.4963, 29.5121),
				  (106.4978, 29.5361),
				  (106.496, 29.5322),
				  (106.4948, 29.5336),
				  (106.4928, 29.5302),
				  (106.4939, 29.533),
				  (106.4951, 29.5405),
				  (106.4982, 29.542),
				  (106.5209, 29.509),
				  (106.4991, 29.5262),
				  (106.4969, 29.5452),
				  (106.4991, 29.5262),
				  (106.5002, 29.5096),
				  (106.4983, 29.5142),
				  (106.5209, 29.509),
				  (106.4928, 29.5336),
				  (106.4928, 29.5302),
				  (106.4978, 29.5361),
				  (106.4914, 29.5284),
				  (106.4952, 29.517),
				  (106.4969, 29.5452),
				  (106.4967, 29.511),
				  (106.4963, 29.5121),
				  (106.4939, 29.533),
				  (106.4967, 29.5249),
				  (106.4967, 29.5104),
				  (106.4982, 29.542),
				  (106.4967, 29.511),
				  (106.4952, 29.517),
				  (106.4963, 29.5121),
				  (106.4967, 29.511),
				  (106.4995, 29.5261),
				  (106.4967, 29.5104),
				  (106.4928, 29.5336),
				  (106.4983, 29.5132),
				  (106.5003, 29.5142),
				  (106.5005, 29.5188),
				  (106.5002, 29.5096),
				  (106.4969, 29.5452),
				  (106.4967, 29.5104),
				  (106.4995, 29.5181),
				  (106.4991, 29.5112),
				  (106.5005, 29.5268),
				  (106.4969, 29.5452),
				  (106.5209, 29.509),
				  (106.4926, 29.5389),
				  (106.4971, 29.517),
				  (106.4995, 29.5261),
				  (106.5002, 29.5096),
				  (106.4997, 29.5373),
				  (106.4967, 29.5104),
				  (106.496, 29.5322),
				  (106.5209, 29.509),
				  (106.4967, 29.511),
				  (106.5005, 29.5188),
				  (106.4928, 29.5302),
				  (106.4951, 29.5405),
				  (106.5005, 29.5188),
				  (106.4951, 29.5405),
				  (106.5005, 29.5268),
				  (106.4967, 29.5249),
				  (106.4955, 29.5299),
				  (106.4995, 29.5261),
				  (106.4952, 29.517),
				  (106.4983, 29.5132),
				  (106.4969, 29.5452),
				  (106.5003, 29.5142),
				  (106.5209, 29.509),
				  (106.4967, 29.5104),
				  (106.4995, 29.5261),
				  (106.4991, 29.5112),
				  (106.4982, 29.542),
				  (106.5003, 29.5142),
				  (106.4983, 29.5142),
				  (106.4983, 29.5132),
				  (106.4967, 29.5104),
				  (106.4967, 29.511),
				  (106.4978, 29.5361),
				  (106.4926, 29.5389),
				  (106.4928, 29.5302),
				  (106.4969, 29.5452),
				  (106.4939, 29.533),
				  (106.4943, 29.5327),
				  (106.4995, 29.5261),
				  (106.4943, 29.5327),
				  (106.4967, 29.5104),
				  (106.4939, 29.533),
				  (106.5005, 29.5188),
				  (106.4963, 29.5121),
				  (106.4943, 29.5327),
				  (106.4971, 29.517),
				  (106.4967, 29.511),
				  (106.4991, 29.5262),
				  (106.4939, 29.533),
				  (106.4995, 29.5181),
				  (106.4967, 29.5104),
				  (106.4983, 29.5142),
				  (106.4995, 29.5261),
				  (106.4967, 29.511),
				  (106.4995, 29.5181),
				  (106.4997, 29.5373),
				  (106.5003, 29.5142),
				  (106.4928, 29.5302),
				  (106.4983, 29.5142),
				  (106.5005, 29.5268),
				  (106.4955, 29.5299),
				  (106.4951, 29.5405),
				  (106.4967, 29.5249),
				  (106.4963, 29.5121),
				  (106.5002, 29.5096),
				  (106.4943, 29.5327),
				  (106.4967, 29.511),
				  (106.4928, 29.5302),
				  (106.4995, 29.5181),
				  (106.4967, 29.511),
				  (106.4983, 29.5132),
				  (106.4997, 29.5373),
				  (106.5209, 29.509),
				  (106.5002, 29.5096),
				  (106.4914, 29.5284),
				  (106.4983, 29.5132),
				  (106.4928, 29.5336),
				  (106.4967, 29.511),
				  (106.4928, 29.5336),
				  (106.4939, 29.533),
				  (106.4969, 29.5452),
				  (106.4955, 29.5299),
				  (106.5002, 29.5096),
				  (106.5005, 29.5188),
				  (106.4983, 29.5142),
				  (106.4991, 29.5262),
				  (106.4963, 29.5121),
				  (106.4991, 29.5112),
				  (106.4971, 29.517),
				  (106.4948, 29.5336),
				  (106.4926, 29.5389),
				  (106.5005, 29.5268),
				  (106.4967, 29.5104),
				  (106.4967, 29.5249),
				  (106.5005, 29.5188),
				  (106.4967, 29.5249),
				  (106.5002, 29.5096),
				  (106.4963, 29.5121),
				  (106.4951, 29.5405),
				  (106.4955, 29.5299),
				  (106.4991, 29.5262),
				  (106.4967, 29.511),
				  (106.4971, 29.517),
				  (106.5003, 29.5142),
				  (106.4943, 29.5327),
				  (106.4983, 29.5132),
				  (106.4967, 29.5249),
				  (106.5003, 29.5142),
				  (106.4967, 29.5249),
				  (106.4971, 29.517),
				  (106.5002, 29.5096),
				  (106.4978, 29.5361),
				  (106.5003, 29.5142),
				  (106.4971, 29.517),
				  (106.4963, 29.5121),
				  (106.5005, 29.5268),
				  (106.5002, 29.5096),
				  (106.4928, 29.5336),
				  (106.4982, 29.542),
				  (106.4991, 29.5112),
				  (106.4983, 29.5142),
				  (106.4971, 29.517),
				  (106.4982, 29.542),
				  (106.4928, 29.5336),
				  (106.4926, 29.5389),
				  (106.496, 29.5322),
				  (106.5003, 29.5142),
				  (106.4939, 29.533),
				  (106.4914, 29.5284),
				  (106.4948, 29.5336),
				  (106.4991, 29.5112),
				  (106.4967, 29.511),
				  (106.5005, 29.5268),
				  (106.4983, 29.5142),
				  (106.4995, 29.5181),
				  (106.5209, 29.509),
				  (106.4963, 29.5121),
				  (106.5003, 29.5142),
				  (106.496, 29.5322),
				  (106.4952, 29.517),
				  (106.4948, 29.5336),
				  (106.4971, 29.517),
				  (106.4983, 29.5132),
				  (106.4967, 29.511),
				  (106.4991, 29.5112),
				  (106.4995, 29.5261),
				  (106.4967, 29.5249),
				  (106.4982, 29.542),
				  (106.4991, 29.5262),
				  (106.4914, 29.5284),
				  (106.5005, 29.5188),
				  (106.4995, 29.5181),
				  (106.4995, 29.5261),
				  (106.5005, 29.5268),
				  (106.4991, 29.5112),
				  (106.4926, 29.5389),
				  (106.4952, 29.517),
				  (106.4955, 29.5299),
				  (106.5209, 29.509),
				  (106.4983, 29.5132),
				  (106.4978, 29.5361),
				  (106.5005, 29.5268),
				  (106.4971, 29.517),
				  (106.4955, 29.5299),
				  (106.4967, 29.5104),
				  (106.5209, 29.509),
				  (106.4955, 29.5299),
				  (106.4991, 29.5112),
				  (106.4914, 29.5284),
				  (106.4928, 29.5302),
				  (106.4982, 29.542),
				  (106.4967, 29.5249),
				  (106.4995, 29.5261),
				  (106.4928, 29.5302),
				  (106.4952, 29.517),
				  (106.4982, 29.542),
				  (106.4928, 29.5302),
				  (106.4971, 29.517),
				  (106.4997, 29.5373),
				  (106.4983, 29.5142),
				  (106.496, 29.5322),
				  (106.4951, 29.5405),
				  (106.4928, 29.5302),
				  (106.4963, 29.5121),
				  (106.4928, 29.5302),
				  (106.4926, 29.5389),
				  (106.5005, 29.5188),
				  (106.4939, 29.533),
				  (106.4948, 29.5336),
				  (106.4914, 29.5284),
				  (106.4978, 29.5361),
				  (106.4982, 29.542),
				  (106.4948, 29.5336),
				  (106.4963, 29.5121),
				  (106.4967, 29.5104),
				  (106.4943, 29.5327),
				  (106.4963, 29.5121),
				  (106.4948, 29.5336),
				  (106.4983, 29.5132),
				  (106.496, 29.5322),
				  (106.4991, 29.5112),
				  (106.5003, 29.5142),
				  (106.4955, 29.5299),
				  (106.5005, 29.5188),
				  (106.4943, 29.5327),
				  (106.4978, 29.5361),
				  (106.4967, 29.5249),
				  (106.4991, 29.5262),
				  (106.4983, 29.5132),
				  (106.4995, 29.5181),
				  (106.5002, 29.5096),
				  (106.4948, 29.5336),
				  (106.4983, 29.5142),
				  (106.4943, 29.5327),
				  (106.4995, 29.5181),
				  (106.4969, 29.5452),
				  (106.4967, 29.5249),
				  (106.4943, 29.5327),
				  (106.4914, 29.5284),
				  (106.4982, 29.542),
				  (106.4969, 29.5452),
				  (106.4928, 29.5302),
				  (106.4955, 29.5299),
				  (106.4928, 29.5302),
				  (106.5003, 29.5142),
				  (106.4948, 29.5336),
				  (106.4967, 29.511),
				  (106.4983, 29.5142),
				  (106.4963, 29.5121),
				  (106.4955, 29.5299),
				  (106.4983, 29.5142),
				  (106.5005, 29.5188),
				  (106.4967, 29.5104),
				  (106.5003, 29.5142),
				  (106.4926, 29.5389),
				  (106.4943, 29.5327),
				  (106.4951, 29.5405),
				  (106.4914, 29.5284),
				  (106.4943, 29.5327),
				  (106.5209, 29.509),
				  (106.4969, 29.5452),
				  (106.4928, 29.5336),
				  (106.4951, 29.5405),
				  (106.4952, 29.517),
				  (106.4928, 29.5336),
				  (106.4995, 29.5181),
				  (106.4943, 29.5327),
				  (106.4926, 29.5389),
				  (106.4969, 29.5452),
				  (106.4951, 29.5405),
				  (106.4928, 29.5336),
				  (106.4971, 29.517),
				  (106.4995, 29.5181),
				  (106.496, 29.5322),
				  (106.4914, 29.5284),
				  (106.4967, 29.5249),
				  (106.4951, 29.5405),
				  (106.4983, 29.5132),
				  (106.4951, 29.5405),
				  (106.4971, 29.517),
				  (106.4951, 29.5405),
				  (106.4948, 29.5336),
				  (106.5002, 29.5096),
				  (106.4991, 29.5112),
				  (106.4952, 29.517),
				  (106.4967, 29.5104),
				  (106.4914, 29.5284),
				  (106.4928, 29.5336),
				  (106.4943, 29.5327),
				  (106.4948, 29.5336),
				  (106.496, 29.5322),
				  (106.4963, 29.5121),
				  (106.5005, 29.5188),
				  (106.4991, 29.5262),
				  (106.4928, 29.5302),
				  (106.496, 29.5322),
				  (106.4969, 29.5452),
				  (106.496, 29.5322),
				  (106.4995, 29.5261),
				  (106.4983, 29.5142),
				  (106.4948, 29.5336),
				  (106.4952, 29.517),
				  (106.5005, 29.5188),
				  (106.4995, 29.5261),
				  (106.4955, 29.5299),
				  (106.4978, 29.5361),
				  (106.4952, 29.517),
				  (106.4997, 29.5373),
				  (106.4971, 29.517),
				  (106.4943, 29.5327),
				  (106.4967, 29.5249),
				  (106.4928, 29.5302),
				  (106.4943, 29.5327),
				  (106.4991, 29.5112),
				  (106.4948, 29.5336),
				  (106.4967, 29.5249),
				  (106.4978, 29.5361),
				  (106.4983, 29.5142),
				  (106.4982, 29.542),
				  (106.4995, 29.5181),
				  (106.4926, 29.5389),
				  (106.5209, 29.509),
				  (106.4948, 29.5336),
				  (106.4928, 29.5336),
				  (106.5003, 29.5142),
				  (106.4982, 29.542),
				  (106.4997, 29.5373),
				  (106.4955, 29.5299),
				  (106.4943, 29.5327),
				  (106.4928, 29.5336),
				  (106.5209, 29.509),
				  (106.4967, 29.5249),
				  (106.4926, 29.5389),
				  (106.5002, 29.5096),
				  (106.4982, 29.542),
				  (106.496, 29.5322),
				  (106.5005, 29.5268),
				  (106.4967, 29.511),
				  (106.4914, 29.5284),
				  (106.5209, 29.509),
				  (106.4995, 29.5181),
				  (106.4967, 29.5249),
				  (106.496, 29.5322),
				  (106.4991, 29.5262),
				  (106.5003, 29.5142),
				  (106.4952, 29.517),
				  (106.5003, 29.5142),
				  (106.4951, 29.5405),
				  (106.4991, 29.5262),
				  (106.4967, 29.5249),
				  (106.5005, 29.5268),
				  (106.4983, 29.5132),
				  (106.4939, 29.533),
				  (106.4983, 29.5142),
				  (106.4967, 29.511),
				  (106.4967, 29.5104),
				  (106.4971, 29.517),
				  (106.5005, 29.5188),
				  (106.5005, 29.5268),
				  (106.4997, 29.5373),
				  (106.4978, 29.5361),
				  (106.5002, 29.5096),
				  (106.4951, 29.5405),
				  (106.4995, 29.5261),
				  (106.4928, 29.5336),
				  (106.5002, 29.5096),
				  (106.4926, 29.5389),
				  (106.4948, 29.5336),
				  (106.4997, 29.5373),
				  (106.5005, 29.5188),
				  (106.4967, 29.511),
				  (106.5209, 29.509),
				  (106.4951, 29.5405),
				  (106.5209, 29.509),
				  (106.4982, 29.542),
				  (106.4943, 29.5327),
				  (106.4982, 29.542),
				  (106.5005, 29.5268),
				  (106.4951, 29.5405),
				  (106.4995, 29.5181),
				  (106.4939, 29.533),
				  (106.4995, 29.5261),
				  (106.4951, 29.5405),
				  (106.4991, 29.5112),
				  (106.4963, 29.5121),
				  (106.4969, 29.5452),
				  (106.4943, 29.5327),
				  (106.5005, 29.5188),
				  (106.496, 29.5322),
				  (106.4939, 29.533),
				  (106.4928, 29.5302),
				  (106.4928, 29.5336),
				  (106.4948, 29.5336),
				  (106.4982, 29.542),
				  (106.4971, 29.517),
				  (106.4952, 29.517),
				  (106.4983, 29.5142),
				  (106.4991, 29.5112),
				  (106.4991, 29.5262),
				  (106.4952, 29.517),
				  (106.4914, 29.5284),
				  (106.4926, 29.5389),
				  (106.4963, 29.5121),
				  (106.4914, 29.5284),
				  (106.4991, 29.5262),
				  (106.4983, 29.5142),
				  (106.5002, 29.5096),
				  (106.4967, 29.5104),
				  (106.4928, 29.5302),
				  (106.4995, 29.5261),
				  (106.4991, 29.5262),
				  (106.4948, 29.5336),
				  (106.4955, 29.5299),
				  (106.4983, 29.5132),
				  (106.4963, 29.5121),
				  (106.5209, 29.509),
				  (106.4991, 29.5112),
				  (106.4978, 29.5361),
				  (106.4951, 29.5405),
				  (106.4963, 29.5121),
				  (106.4928, 29.5336),
				  (106.4978, 29.5361),
				  (106.4928, 29.5336),
				  (106.4991, 29.5112),
				  (106.4939, 29.533),
				  (106.4983, 29.5132),
				  (106.4914, 29.5284),
				  (106.4991, 29.5112),
				  (106.4928, 29.5302),
				  (106.4991, 29.5112),
				  (106.4997, 29.5373),
				  (106.4967, 29.511),
				  (106.4948, 29.5336),
				  (106.4995, 29.5181),
				  (106.4928, 29.5336),
				  (106.4995, 29.5261),
				  (106.4948, 29.5336),
				  (106.4995, 29.5261),
				  (106.4995, 29.5181),
				  (106.4952, 29.517),
				  (106.4928, 29.5302),
				  (106.4948, 29.5336),
				  (106.5005, 29.5268),
				  (106.4991, 29.5262),
				  (106.5005, 29.5268),
				  (106.4995, 29.5261),
				  (106.496, 29.5322),
				  (106.4926, 29.5389),
				  (106.4983, 29.5142),
				  (106.4978, 29.5361),
				  (106.4928, 29.5302),
				  (106.4997, 29.5373),
				  (106.4914, 29.5284),
				  (106.4967, 29.5104),
				  (106.4948, 29.5336),
				  (106.4939, 29.533),
				  (106.5002, 29.5096),
				  (106.4967, 29.5249),
				  (106.5209, 29.509),
				  (106.4995, 29.5261),
				  (106.4969, 29.5452),
				  (106.4983, 29.5142),
				  (106.5003, 29.5142),
				  (106.4969, 29.5452),
				  (106.5005, 29.5268),
				  (106.4982, 29.542),
				  (106.4926, 29.5389),
				  (106.4967, 29.5249),
				  (106.4983, 29.5142),
				  (106.4967, 29.5249),
				  (106.4997, 29.5373),
				  (106.4991, 29.5262),
				  (106.4971, 29.517),
				  (106.496, 29.5322),
				  (106.4967, 29.5104),
				  (106.4926, 29.5389),
				  (106.4967, 29.511),
				  (106.496, 29.5322),
				  (106.4995, 29.5181),
				  (106.5003, 29.5142),
				  (106.4967, 29.5104),
				  (106.4991, 29.5112),
				  (106.4995, 29.5181),
				  (106.4963, 29.5121),
				  (106.4997, 29.5373),
				  (106.496, 29.5322),
				  (106.4955, 29.5299),
				  (106.5003, 29.5142),
				  (106.4991, 29.5262),
				  (106.4955, 29.5299),
				  (106.4997, 29.5373),
				  (106.4948, 29.5336),
				  (106.5005, 29.5188),
				  (106.5003, 29.5142),
				  (106.5002, 29.5096),
				  (106.4971, 29.517),
				  (106.4928, 29.5336),
				  (106.4969, 29.5452),
				  (106.5002, 29.5096),
				  (106.4955, 29.5299),
				  (106.4926, 29.5389),
				  (106.4983, 29.5132),
				  (106.4983, 29.5142),
				  (106.4967, 29.5104),
				  (106.5005, 29.5268),
				  (106.4978, 29.5361),
				  (106.4967, 29.511),
				  (106.4997, 29.5373),
				  (106.4963, 29.5121),
				  (106.4983, 29.5132),
				  (106.4995, 29.5261),
				  (106.4997, 29.5373),
				  (106.4995, 29.5261),
				  (106.5005, 29.5188),
				  (106.4955, 29.5299),
				  (106.4948, 29.5336),
				  (106.5003, 29.5142),
				  (106.4967, 29.511),
				  (106.4982, 29.542),
				  (106.4983, 29.5132),
				  (106.5209, 29.509),
				  (106.5003, 29.5142),
				  (106.4963, 29.5121),
				  (106.4995, 29.5261),
				  (106.4926, 29.5389),
				  (106.4914, 29.5284),
				  (106.4939, 29.533),
				  (106.4991, 29.5262),
				  (106.4995, 29.5181),
				  (106.4955, 29.5299),
				  (106.4952, 29.517),
				  (106.4951, 29.5405),
				  (106.4939, 29.533),
				  (106.4971, 29.517),
				  (106.4914, 29.5284),
				  (106.4995, 29.5261),
				  (106.4939, 29.533),
				  (106.4952, 29.517),
				  (106.4971, 29.517),
				  (106.4978, 29.5361),
				  (106.4971, 29.517),
				  (106.4939, 29.533),
				  (106.5209, 29.509),
				  (106.4978, 29.5361),
				  (106.4955, 29.5299),
				  (106.4967, 29.5249),
				  (106.4928, 29.5336),
				  (106.4914, 29.5284),
				  (106.4997, 29.5373),
				  (106.4991, 29.5112),
				  (106.5002, 29.5096),
				  (106.4928, 29.5302),
				  (106.5005, 29.5268),
				  (106.4926, 29.5389),
				  (106.4955, 29.5299),
				  (106.4969, 29.5452),
				  (106.4963, 29.5121),
				  (106.4967, 29.5249),
				  (106.4967, 29.511),
				  (106.4926, 29.5389),
				  (106.4939, 29.533),
				  (106.4967, 29.511),
				  (106.4969, 29.5452),
				  (106.5005, 29.5188),
				  (106.4952, 29.517),
				  (106.4991, 29.5112),
				  (106.4983, 29.5132),
				  (106.5002, 29.5096),
				  (106.4983, 29.5132),
				  (106.5005, 29.5188),
				  (106.4914, 29.5284),
				  (106.496, 29.5322),
				  (106.4943, 29.5327),
				  (106.4983, 29.5142),
				  (106.4997, 29.5373),
				  (106.4983, 29.5132),
				  (106.4955, 29.5299),
				  (106.496, 29.5322),
				  (106.4967, 29.5249),
				  (106.4952, 29.517),
				  (106.4926, 29.5389),
				  (106.4982, 29.542),
				  (106.4983, 29.5142),
				  (106.4928, 29.5302),
				  (106.4967, 29.511),
				  (106.4939, 29.533),
				  (106.4967, 29.5104),
				  (106.4963, 29.5121),
				  (106.496, 29.5322),
				  (106.4967, 29.511),
				  (106.4943, 29.5327),
				  (106.5005, 29.5268),
				  (106.5005, 29.5188),
				  (106.4978, 29.5361),
				  (106.5209, 29.509),
				  (106.4983, 29.5142),
				  (106.4955, 29.5299),
				  (106.4971, 29.517),
				  (106.4926, 29.5389),
				  (106.4951, 29.5405),
				  (106.4943, 29.5327),
				  (106.4997, 29.5373),
				  (106.4951, 29.5405),
				  (106.4967, 29.5104),
				  (106.4955, 29.5299),
				  (106.4995, 29.5181),
				  (106.5005, 29.5268),
				  (106.496, 29.5322),
				  (106.4928, 29.5336),
				  (106.4963, 29.5121),
				  (106.4983, 29.5142),
				  (106.4939, 29.533),
				  (106.4978, 29.5361),
				  (106.4991, 29.5112),
				  (106.4969, 29.5452),
				  (106.4997, 29.5373),
				  (106.4943, 29.5327),
				  (106.4939, 29.533),
				  (106.4997, 29.5373),
				  (106.4995, 29.5181),
				  (106.4951, 29.5405),
				  (106.5002, 29.5096),
				  (106.4991, 29.5262),
				  (106.5005, 29.5188),
				  (106.4971, 29.517),
				  (106.4969, 29.5452),
				  (106.4995, 29.5181),
				  (106.4971, 29.517),
				  (106.5209, 29.509),
				  (106.4943, 29.5327),
				  (106.496, 29.5322),
				  (106.4928, 29.5302),
				  (106.4914, 29.5284),
				  (106.4963, 29.5121),
				  (106.4995, 29.5181),
				  (106.4914, 29.5284),
				  (106.4969, 29.5452),
				  (106.4952, 29.517),
				  (106.4995, 29.5181),
				  (106.4983, 29.5132),
				  (106.4926, 29.5389),
				  (106.4995, 29.5181),
				  (106.4982, 29.542),
				  (106.4951, 29.5405),
				  (106.4997, 29.5373),
				  (106.4982, 29.542),
				  (106.4914, 29.5284),
				  (106.4983, 29.5142),
				  (106.4952, 29.517),
				  (106.4978, 29.5361),
				  (106.4991, 29.5262),
				  (106.4943, 29.5327),
				  (106.4969, 29.5452),
				  (106.4914, 29.5284),
				  (106.4951, 29.5405),
				  (106.4978, 29.5361),
				  (106.4995, 29.5181),
				  (106.4991, 29.5262),
				  (106.4978, 29.5361),
				  (106.4963, 29.5121),
				  (106.4971, 29.517),
				  (106.4991, 29.5262),
				  (106.4928, 29.5336),
				  (106.4967, 29.5249),
				  (106.4948, 29.5336),
				  (106.4991, 29.5262),
				  (106.4951, 29.5405),
				  (106.4967, 29.511),
				  (106.4951, 29.5405),
				  (106.4983, 29.5142),
				  (106.4928, 29.5336),
				  (106.4967, 29.5104),
				  (106.4969, 29.5452),
				  (106.4948, 29.5336),
				  (106.4978, 29.5361),
				  (106.5005, 29.5188),
				  (106.4982, 29.542),
				  (106.4978, 29.5361),
				  (106.4943, 29.5327),
				  (106.4991, 29.5262),
				  (106.496, 29.5322),
				  (106.4971, 29.517),
				  (106.4967, 29.5249),
				  (106.4969, 29.5452),
				  (106.4971, 29.517),
				  (106.4991, 29.5112),
				  (106.4967, 29.5249),
				  (106.4995, 29.5181),
				  (106.4983, 29.5142),
				  (106.4969, 29.5452),
				  (106.4926, 29.5389),
				  (106.4928, 29.5336),
				  (106.496, 29.5322),
				  (106.4978, 29.5361),
				  (106.4983, 29.5132),
				  (106.4991, 29.5112),
				  (106.496, 29.5322),
				  (106.4982, 29.542),
				  (106.5002, 29.5096),
				  (106.4952, 29.517),
				  (106.4995, 29.5261),
				  (106.4971, 29.517),
				  (106.4983, 29.5142),
				  (106.4914, 29.5284),
				  (106.4971, 29.517),
				  (106.4928, 29.5302),
				  (106.4967, 29.5104),
				  (106.4951, 29.5405),
				  (106.4926, 29.5389),
				  (106.5003, 29.5142),
				  (106.4995, 29.5261),
				  (106.4963, 29.5121),
				  (106.4926, 29.5389),
				  (106.4991, 29.5112),
				  (106.4955, 29.5299),
				  (106.4963, 29.5121),
				  (106.4952, 29.517),
				  (106.4967, 29.5249),
				  (106.4991, 29.5112),
				  (106.4943, 29.5327),
				  (106.4952, 29.517),
				  (106.4967, 29.511),
				  (106.5003, 29.5142),
				  (106.4914, 29.5284),
				  (106.5002, 29.5096),
				  (106.5005, 29.5268),
				  (106.4952, 29.517),
				  (106.496, 29.5322),
				  (106.5005, 29.5188),
				  (106.4991, 29.5112),
				  (106.4928, 29.5336),
				  (106.4991, 29.5262),
				  (106.4967, 29.5104),
				  (106.4952, 29.517),
				  (106.5209, 29.509),
				  (106.5005, 29.5188),
				  (106.5209, 29.509),
				  (106.4928, 29.5302),
				  (106.4983, 29.5132),
				  (106.4991, 29.5262),
				  (106.5209, 29.509),
				  (106.4914, 29.5284),
				  (106.4955, 29.5299),
				  (106.4939, 29.533),
				  (106.4928, 29.5336),
				  (106.4952, 29.517),
				  (106.4991, 29.5262),
				  (106.4997, 29.5373),
				  (106.5005, 29.5268),
				  (106.4928, 29.5336),
				  (106.4955, 29.5299),
				  (106.5005, 29.5268),
				  (106.4939, 29.533),
				  (106.4991, 29.5112),
				  (106.5209, 29.509),
				  (106.4971, 29.517),
				  (106.5005, 29.5268),
				  (106.4928, 29.5302),
				  (106.5002, 29.5096),
				  (106.496, 29.5322),
				  (106.5002, 29.5096),
				  (106.5003, 29.5142),
				  (106.4983, 29.5132),
				  (106.4971, 29.517),
				  (106.4967, 29.5104),
				  (106.4997, 29.5373),
				  (106.4969, 29.5452),
				  (106.4991, 29.5112),
				  (106.4951, 29.5405),
				  (106.5003, 29.5142),
				  (106.4978, 29.5361),
				  (106.4995, 29.5261),
				  (106.4982, 29.542),
				  (106.4967, 29.5104),
				  (106.4991, 29.5262),
				  (106.4926, 29.5389),
				  (106.4995, 29.5261),
				  (106.4978, 29.5361),
				  (106.4939, 29.533),
				  (106.496, 29.5322),
				  (106.4997, 29.5373),
				  (106.4928, 29.5302),
				  (106.4967, 29.5249),
				  (106.4914, 29.5284),
				  (106.4995, 29.5181),
				  (106.4948, 29.5336),
				  (106.4943, 29.5327),
				  (106.4928, 29.5302),
				  (106.4991, 29.5262),
				  (106.4995, 29.5261),
				  (106.5209, 29.509),
				  (106.4939, 29.533),
				  (106.5005, 29.5268),
				  (106.4995, 29.5181),
				  (106.4928, 29.5302),
				  (106.5005, 29.5188),
				  (106.4926, 29.5389),
				  (106.4978, 29.5361),
				  (106.4997, 29.5373),
				  (106.5002, 29.5096),
				  (106.4995, 29.5181),
				  (106.5005, 29.5188),
				  (106.4969, 29.5452),
				  (106.4995, 29.5261),
				  (106.4914, 29.5284),
				  (106.5003, 29.5142),
				  (106.4995, 29.5181),
				  (106.4978, 29.5361),
				  (106.4948, 29.5336),
				  (106.4967, 29.5104),
				  (106.5005, 29.5188),
				  (106.4983, 29.5132),
				  (106.4928, 29.5302),
				  (106.5209, 29.509),
				  (106.4952, 29.517),
				  (106.5005, 29.5268),
				  (106.4914, 29.5284),
				  (106.4967, 29.511),
				  (106.5002, 29.5096),
				  (106.4995, 29.5261),
				  (106.4983, 29.5132),
				  (106.4982, 29.542),
				  (106.4995, 29.5261),
				  (106.5003, 29.5142),
				  (106.4991, 29.5112),
				  (106.5005, 29.5188),
				  (106.4928, 29.5336),
				  (106.4983, 29.5142),
				  (106.4983, 29.5142),
				  (106.4983, 29.5142),
				  (106.4951, 29.5405)],
		}
		for k, v in cases.items():
			print(f"====================={k}========================")
			res = waypoints_route(*v, time_slot='17', strictly_constrained=False)

	def test_route_waypoints(self):
		cases = {
			'1': [(104.112577, 30.715819), (108.946166, 34.349382), (104.08477705440137, 30.663263256764417), (116.454155, 39.92771505), (104.08477705440137, 30.663263256764417),
			      (104.10953028, 30.71808271), (104.08477705440137, 30.663263256764417), (104.112577, 30.715819),
			      (104.08477705440137, 30.663263256764417), (108.946166, 34.349382), (116.454155, 39.92771505), (104.10953028, 30.71808271), (116.454155, 39.92771505),
			      (104.112577, 30.715819), (116.454155, 39.92771505), (108.946166, 34.349382), (104.10953028, 30.71808271), (104.112577, 30.715819),
			      (104.10953028, 30.71808271), (108.946166, 34.349382), (104.112577, 30.715819), (116.449767, 39.927254), (104.08477705440137, 30.663263256764417), (116.449767, 39.927254),
			      (116.454155, 39.92771505), (116.449767, 39.927254), (104.10953028, 30.71808271), (116.449767, 39.927254),
			      (104.112577, 30.715819), (116.450437, 39.921342), (104.08477705440137, 30.663263256764417), (116.450437, 39.921342), (116.454155, 39.92771505), (116.450437, 39.921342),
			      (104.10953028, 30.71808271), (116.450437, 39.921342), (104.112577, 30.715819), (116.449767, 39.927254),
			      (108.946166, 34.349382), (116.449767, 39.927254), (116.450437, 39.921342), (108.946166, 34.349382), (116.450437, 39.921342), (116.449767, 39.927254)]
		}
		for k, v in cases.items():
			print(f"====================={k}========================")
			s = time.perf_counter()
			print(s)
			res = waypoints_route(*v, strictly_constrained=False)
			print(time.perf_counter()-s)

	def test_distance_matrix_all(self):
		import time
		s = time.perf_counter()
		for i in range(30):
			# points = [(116.1425, 39.7733), (116.1223, 39.7198), (116.1708, 39.7122), (116.1917, 39.7391), (116.2068, 39.7563), (116.2247, 39.7346), (116.1425, 39.7733), (116.1425, 39.7733), (116.1425, 39.7733)]
			# points = [(116.1425, 39.7733), (116.1223, 39.7198), (116.1708, 39.7122), (116.1917, 39.7391), (116.2068, 39.7563), (116.2247, 39.7346), (116.1425, 39.7733)]
			# points = [(123.347735, 41.78451), (123.506014, 41.643884), (123.487702, 41.789835), (123.539088, 41.81769), (123.379353, 41.76286), (123.50595905831017, 41.643812432484395)]
			points = [(116.4459, 39.8696), (116.4015, 39.8999), (116.4023, 39.9002), (116.4041, 39.9002),
					  (116.4051, 39.9003), (116.4059, 39.9003), (116.4066, 39.8962), (116.4066, 39.8963),
					  (116.4066, 39.896), (116.4067, 39.8968),
					  (116.4068, 39.8933), (116.4068, 39.8963), (116.4068, 39.8965), (116.4068, 39.8966),
					  (116.4077, 39.9003), (116.4092, 39.9005), (116.4128, 39.9004), (116.4158, 39.9006),
					  (116.4287, 39.9004), (116.4309, 39.9003),
					  (116.4641, 39.8659), (116.4459, 39.8696), (116.4459, 39.8696), (116.4459, 39.8696)]

			res, _, _ = distance_matrix(*points)
			print(time.perf_counter() - s)

	def test_issue_3(self):
		res = distance_matrix((116.223, 39.9057), (116.1747, 39.9437), (116.223, 39.9057),geo_wide=0)
		print(res)